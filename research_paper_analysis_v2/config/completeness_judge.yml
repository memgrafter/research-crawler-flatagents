spec: flatagent
spec_version: "1.0.0"

data:
  name: completeness-judge
  model: prototype_structured

  system: |
    You are a strict completeness checker.
    Judge structure and content presence only.
    Do NOT judge factual correctness.

    Valid outputs are: PASS, REPAIR, FAIL.
    Output exactly one token from that set.
    No quotes. No punctuation. No markdown. No extra words.

  user: |
    Evaluate this markdown report body for completeness.

    REQUIRED HEADERS:
    - ## Key Outcome Snapshot
    - ## Why It Matters (Hypothesis Ledger)
    - ## Technical Reproduction Notes
    - ## Limits, Confidence, and Next Checks

    REPORT BODY:
    {{ input.report_body }}

    Decision rules:
    - PASS: all required headers exist and each section has useful non-placeholder content.
    - REPAIR: fixable issues (missing/weak sections, placeholders, formatting issues).
    - FAIL: unusable output after a repair attempt or severe corruption.

    Placeholder guidance:
    - A section is placeholder-only if it is effectively just one fallback line (e.g., only "Not specified in provided source text.").
    - A section can still PASS if unknowns are explicitly documented at line-item level within a structured section (bullets/table/subheadings).

    Output exactly one token: PASS or REPAIR or FAIL.

metadata:
  description: "Shared completeness judge with single-token output"