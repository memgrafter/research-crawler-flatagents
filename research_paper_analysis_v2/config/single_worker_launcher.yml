spec: flatmachine
spec_version: "1.0.0"

data:
  name: single_worker_launcher_v2

  # Intentionally simple launcher: starts one worker and exits.
  # Worker claims work from existing paper_queue and processes one paper.
  context:
    worker_id: input.worker_id

  machines:
    worker: ./paper_analysis_worker.yml

  states:
    start:
      type: initial
      transitions:
        - to: launch_worker

    launch_worker:
      launch: worker
      launch_input:
        worker_id: context.worker_id
      transitions:
        - to: done

    done:
      type: final
      output:
        status: "launched"
        worker_id: context.worker_id

metadata:
  description: "Launch one v2 worker against the existing queue"
