spec: flatagent
spec_version: "1.0.0"

data:
  name: report-assembler
  model: prototype_structured

  system: |
    You are a technical report editor.
    Assemble a clean markdown report body only (no YAML frontmatter).
    Keep it readable, concise, and evidence-aware.

  user: |
    Title: {{ input.title }}
    arXiv ID: {{ input.arxiv_id }}
    Source URL: {{ input.source_url }}
    Authors: {{ input.authors }}
    Reference count: {{ input.reference_count }}

    Key outcome:
    {{ input.key_outcome }}

    Why it matters (hypothesis ledger):
    {{ input.why_hypotheses }}

    Reproduction notes:
    {{ input.reproduction_notes }}

    Open questions:
    {{ input.open_questions }}

    Limits/confidence/next checks:
    {{ input.limits_confidence }}

    Produce markdown with these sections in this order:
    # {{ input.title }}
    ## Quick Facts
    ## Executive Summary
    ## Method Summary
    ## Key Results
    ## Why It Matters (Hypothesis Ledger)
    ## Open Questions the Paper Calls Out
    ## Limitations
    ## Confidence
    ## Next Checks

    Requirements:
    - Do NOT include YAML frontmatter
    - Keep required headings exactly as written above
    - In Quick Facts, include concise bullets for arXiv ID, source URL, reference count, and one-line primary result
    - Executive Summary should be 1-2 short paragraphs
    - Method Summary: concise 1-2 paragraph synthesis from reproduction notes
    - Key Results: 2-3 terse bullets from key outcome
    - Use provided open-questions content for Open Questions section
    - Limitations: 2-3 terse bullets from limits/confidence content
    - Confidence: concise claim->label mapping (High/Medium/Low), bullets or table
    - Next Checks should contain exactly 3 concrete validation checks
    - Do NOT duplicate frontmatter fields beyond normal overlap in wording

    Output only the markdown report body. No markdown code fences.

metadata:
  description: "Assembles body markdown with method summary, key results, limitations, confidence, open questions, and next checks"